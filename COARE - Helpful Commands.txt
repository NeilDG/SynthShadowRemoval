//COARE Commands
//Clear screen
clear

//For directories
cd scratch2/NeuralNets-GenerativeExperiment-V60.XX.XX
cd scratch2/NeuralNets-GenerativeExperiment-V60.XX.XX-2
cd scratch2/Visdom
unzip "scratch2/SynthWeather Dataset 10.zip"

git clone -b "workspace/V60.XX.XX" "https://github.com/NeilDG/NeuralNets-Experiment3.git" "scratch2/NeuralNets-GenerativeExperiment-V60.XX.XX"
git clone -b "workspace/V60.XX.XX" "https://github.com/NeilDG/NeuralNets-Experiment3.git" "scratch2/NeuralNets-GenerativeExperiment-V60.XX.XX-2"
rm -rf "/scratch1/scratch2/neil.delgallego/NeuralNets-GenerativeExperiment-V60.XX.XX"
rm -rf "/scratch1/scratch2/neil.delgallego/SynthWeather Dataset 10/"

gdown https://drive.google.com/uc?id=1B6erEfeB2_n_KYP5GtCQU-DHGE1bKEVE --o "scratch2/SynthWeather Dataset 10/"
mv "/scratch1/scratch2/neil.delgallego/NeuralNets-GenerativeExperiment-V58.XX.XX/v26" "/scratch1/scratch2/neil.delgallego/SynthWeather Dataset 10/v26"

//Execute job
sbatch --dependency=afterany:361283 slurm_download.slurm
sbatch slurm_download.slurm
sbatch slurm_install.slurm
sbatch slurm_visdom_test.slurm
sbatch visdom_run.slurm
sbatch -w saliksik-cpu-23 visdom_run.slurm
sbatch -w saliksik-cpu-23 --dependency=afterany:335892 visdom_run.slurm

sbatch --dependency=afterany:368459 script_1.slurm
sbatch --dependency=afterany:362479 script_2.slurm
sbatch --dependency=afterany:338540 script_2.slurm


sbatch script_debug.slurm
sbatch slurm_download.sh
sbatch script_1.slurm
sbatch script_2.slurm
sbatch script_3.slurm
sbatch script_4.slurm
sbatch script_5.slurm
sbatch script_6.slurm
sbatch script_7.slurm
sbatch script_8.slurm
sbatch script_9.slurm
sbatch script_10.slurm
sbatch script_11.slurm
sbatch script_12.slurm
sbatch script_13.slurm
sbatch script_14.slurm
sbatch script_15.slurm
sbatch script_16.slurm
sbatch script_17.slurm
sbatch script_18.slurm
sbatch script_19.slurm
sbatch script_20.slurm

sbatch --dependency=afterany:342338 script_debug.slurm
sbatch --dependency=afterany:342351 script_1.slurm
sbatch -w saliksik-gpu-06 slurm_install_gpu.slurm
sbatch -w saliksik-gpu-02 script_1.slurm
sbatch -w saliksik-gpu-06 script_2.slurm
sbatch -w saliksik-gpu-05 script_3.slurm
sbatch -w saliksik-gpu-04 script_4.slurm
sbatch -w saliksik-gpu-05 script_5.slurm
sbatch -w saliksik-gpu-04 script_6.slurm
sbatch -w saliksik-gpu-05 script_7.slurm
sbatch -w saliksik-gpu-04 script_8.slurm

//Check status of job
clear

//Check all
squeue -a
squeue -u neil.delgallego
squeue -w "saliksik-gpu-01, saliksik-gpu-02, saliksik-gpu-03, saliksik-gpu-04, saliksik-gpu-05, saliksik-gpu-06"
//For cancelling job
scancel <jobid>

//VISDOM
visdom -env_path "D:/Users/delgallegon/Documents/GithubProjects/Visdom/"
visdom -env_path "/scratch1/scratch2/neil.delgallego/Visdom/"

export XDG_RUNTIME_DIR=/scratch1/scratch2/neil.delgallego/Visdom/
saliksik.asti.dost.gov.ph:8097

//CCS SERVER-JUPYTERHUB
git clone -b "workspace/V60.XX.XX" "https://github.com/NeilDG/NeuralNets-Experiment3.git" "NeuralNets-GenerativeExperiment-V60.XX.XX"
git clone -b "workspace/V60.XX.XX" "https://github.com/NeilDG/NeuralNets-Experiment3.git" "NeuralNets-GenerativeExperiment-V60.XX.XX-2"
git switch "workspace/V44.XX.XX"
cd NeuralNets-GenerativeExperiment-V60.XX.XX
cd NeuralNets-GenerativeExperiment-V60.XX.XX-2
python "ccs1_main.py"
python "ccs2_main.py"

//FOR DOWNLOAD DATASET, TRY GDRIVE
gdown https://drive.google.com/uc?id=1B6erEfeB2_n_KYP5GtCQU-DHGE1bKEVE
gdown https://drive.google.com/drive/folders/1CMz2flknC81dX3xlKBgNP34NJAQ651DB --fuzzy --o "./v26_base/"
unzip "v26.zip" -d "SynthWeather Dataset 10/"

rm -rf "NeuralNets-GenerativeExperiment-V59.XX.XX"
rm -rf "NeuralNets-GenerativeExperiment-V60.XX.XX"
rm -rf "Places Dataset"
rm -rf "SynthWeather Dataset 10/v44_places"
mkdir "SynthWeather Dataset 10"


zip -r "checkpoints.zip" "rgb2albedo_v9.01_7.pt" "rgb2albedo_v9.01_8.pt" "rgb2albedo_v9.01_9.pt" "rgb2albedo_v9.01_10.pt" "rgb2albedo_v9.01_11.pt" "rgb2albedo_v9.01_12.pt" "rgb2albedo_v9.01_13.pt" "rgb2albedo_v9.01_14.pt" \
"rgb2mask_v9.01_7.pt" "rgb2mask_v9.01_8.pt" "rgb2mask_v9.01_9.pt" "rgb2mask_v9.01_10.pt" "rgb2mask_v9.01_11.pt" "rgb2mask_v9.01_12.pt" "rgb2mask_v9.01_13.pt" "rgb2mask_v9.01_14.pt" \
"rgb2shading_v9.01_7.pt" "rgb2shading_v9.01_8.pt" "rgb2shading_v9.01_9.pt" "rgb2shading_v9.01_10.pt" "rgb2shading_v9.01_11.pt" "rgb2shading_v9.01_12.pt" "rgb2shading_v9.01_13.pt" "rgb2shading_v9.01_14.pt"

zip -r "NeuralNets-CCS.zip" "./NeuralNets-GenerativeExperiment-V9.XX.XX" -x "./NeuralNets-GenerativeExperiment-V9.XX.XX/checkpoint/*"
zip -F "v28_istd.zip" --out "v28_istd_fixed.zip"
unzip "v28_istd_fixed.zip" -d "/home/neil_delgallego/SynthWeather Dataset 10/v28_istd/"
rm -rf "/home/neil_delgallego/SynthWeather Dataset 10/v26_base"
rm -rf "/home/neil_delgallego/SynthWeather Dataset 10/v26"

mv "/home/neil_delgallego/SynthWeather Dataset 10/v28_istd/v28_istd/" "/home/neil_delgallego/SynthWeather Dataset 10/v28_istd"

//GCLOUD
screen -S "MODEL_TRAINER"
screen -R "MODEL_TRAINER"
python "gcloud1_main.py"
python "gcloud2_main.py"
python "gcloud3_main.py"
python "gdown_download.py"

screen -S "VISDOM_PROCESS"
screen -R "VISDOM_PROCESS"

//View all screens
screen -ls

